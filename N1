
(function() {
  'use strict';

  const applicants = [
    {

      mail: localStorage.email,
      password: localStorage.password, 
    },
  ];
const autoSubmitForms = {
   login: localStorage.autoLogin,
  loginCaptcha: localStorage.captchaautosolve,
  appointmentCaptcha: localStorage.captchaautosolve,
  visaType: 'on',
  slotSelection: 'on',
  applicantSelection: 'on',
}

  class LoginBot {
    start() {

    this.#removeRandomnessFromUi()
    this.#enableCopyPasteInInputs()
    this.#setReturnUrl()
    this.#fillForm()

    }





  #removeRandomnessFromUi () {
    // Center main content
    $('#div-main > .container > .row > [class^=col-]').hide()
    $('#div-main > .container > .row > :has(form)').addClass('mx-auto')

    // Remove random top padding
    $(':has(> form)').removeAttr('class')
  }

  #enableCopyPasteInInputs () { $('.entry-disabled:visible').on('copy paste', evt => evt.stopImmediatePropagation()) }

  #setReturnUrl () { $('#ReturnUrl').val($('.new-app-active').attr('href')) }


  #fillForm () {
    const selectedMail = applicants[0].mail
   // const applicant = applicants.find(({ mail }) => mail === selectedMail)

    $(':text[name]:visible').val(selectedMail)

   // applicant?.profilePhotoId && $('#_profilePhoto').attr('src', `/MAR/query/getfile?fileid=${applicant.profilePhotoId}`)
   ;/on|true/.test(autoSubmitForms?.login) &&   $('#btnVerify').trigger('click')
  }





}
  new LoginBot().start();
})();
